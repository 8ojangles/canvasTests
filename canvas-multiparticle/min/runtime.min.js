function draw(){frameRate=60,c.globalCompositeOperation="source-over",c.fillStyle=rgba(0,0,0,1),c.fillRect(0,0,canvas.width,canvas.height),c.globalCompositeOperation="lighter",c.fillText(counter+" "+counter%20,20,20),playing&&(makeParticle(1,200,200,10,"blueFlame"),makeParticle(1,300,200,10,"redFlame"));for(var l=0;l<particles.length;l++){var e=particles[l],i=e.type;switch(i){case"blueFlame":c.fillStyle=rgb(100,100,255),c.fillCircle(e.x,e.y,e.size),c.fillStyle=rgb(255,150,0),c.fillCircle(e.x,e.y,.2*e.size),c.fillStyle=rgb(255,255,255),c.fillCircle(e.x,e.y,.1*e.size),e.x+=e.xVel,e.y+=e.yVel,e.size*=.9,particles.size<.5;break;case"redFlame":c.fillStyle=rgb(255,100,100),c.fillCircle(e.x,e.y,e.size),c.fillStyle=rgb(255,150,0),c.fillCircle(e.x,e.y,.2*e.size),c.fillStyle=rgb(255,255,255),c.fillCircle(e.x,e.y,.1*e.size),e.x-=e.xVel,e.y-=e.yVel,e.size*=.95,particles.size<.5}c.font="20pt arial",c.fillStyle="#ccc",c.fillText(particles.length,20,20),c.fillText(thisNumber,20,60)}counter++}