<!DOCTYPE html>
<html>
<!--
  Created using jsbin.com
  Source can be edited via http://jsbin.com/uhiran/3/edit
-->
  <head>
  <title>CreativeJS graphics playground</title>
  <style>
    canvas { border : 1px lightgray solid; }
    body { margin :0; }
  </style>
  
<style id="jsbin-css">

</style>
</head>
  <body>
    <script src="creative.js"></script>
    <canvas id="creativejs" width='400' height='400'></canvas>
  <script>
var canvas = document.getElementById('creativejs'),
    c = canvas.getContext('2d');

var particles = [];
var counter = 0;
var playing = false;



canvas.addEventListener('mousedown',mousePressed); 
 
function mousePressed(e) { 
  playing = !playing;
  
}

function draw() {
  //frameRate = 25;
  
  c.globalCompositeOperation = 'source-over';
  
  c.fillStyle = rgba(0,0,0,0.4);
    c.fillRect(0,0,canvas.width,canvas.height);
     
  
  c.globalCompositeOperation = 'lighter';
  
  
  c.fillText(counter +' '+ counter%20, 20,20);
  
 if(playing) {
    makeParticle(2);
  }
  
  while (particles.length > 60) {
  particles.shift();
  } // close while
  
  for(var i=0; i<particles.length; i++) {
 
  var p = particles[i];  
   
  c.fillStyle = rgb(100,100,255); 
  c.fillCircle(p.x,p.y,p.size);
   c.fillStyle = rgb(255,150,0);
  c.fillCircle(p.x,p.y,p.size*0.2);
  c.fillStyle = rgb(255,255,255);
  c.fillCircle(p.x,p.y,p.size*0.1);
  
   
  p.x += p.xVel;
  p.y += p.yVel;
  p.size*=0.95;
  /*p.yVel+=0.9;  
  var drag = 0.95; 
  p.xVel *= drag;
  p.yVel *= drag;
  
    if (p.x <=0 ){
      p.x = p.size;
      p.xVel*=-1;
    } // close if
    
     if (p.x >=400 ){
      p.x = 400-p.size;
      p.xVel*=-1;
    } // close if
    
     if (p.y >=400 ){
      p.y = 400-p.size;
      p.yVel*=-1;
    }  // close if */
  
  } // close for
  
  counter++;
} // close draw function

function makeParticle(numParticles) {
  
  for(var i=0; i<numParticles; i++){
    var p = {
    x : mouseX,
    y : mouseY,
    xVel : random(-0.5,0.5),
    yVel : random(-1,-2),
    hue : random(360),
    size : random(5,20)
    }; // close var P
    
      particles.push(p);
  } // close for loop



  
} // close function makeParticle
</script>
</body>
</html>
  